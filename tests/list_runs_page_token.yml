description: Test to validate page token in list runs
service: WES
versions:
  - 1.0.0
tags: []
jobs:
  - $ref: "templates/run_workflow_template.yml"
  - $ref: "templates/run_workflow_template.yml"
  - name: list_runs
    description: Store the next_page_token
    endpoint: /runs
    operation: GET
    query_parameters:
      - page_size: 1
    filter:
      - path: $response.runs
        type: array
        size: 1
    storage_vars:
      next_page_token: $response.next_page_token
    response:
      200: {}
  - name: list_runs
    description: Fetch response after sending stored next_page_token value
    endpoint: /runs
    operation: GET
    query_parameters:
      - page_size: 1
      - page_token: "{next_page_token}"
    filter:
      - path: $response.runs
        type: array
        size: 1
    response:
      200: {}
